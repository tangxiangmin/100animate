<!DOCTYPE html>
<<<<<<< HEAD
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="../css/style.css"/>
		<style rel="stylesheet">
			#t-toolTip {
				position: fixed;
				z-index: 9999;
				padding: 10px;
				
				background: rgba(0,0,0,0.5);
				border-radius: 5px;
			}
		</style>
	</head>
	<body>
		<h1>自定义提示框</h1>
		<p>
			<a href="../index.html">返回主菜单</a>
		</p>
		<div class="wrap">
			
			<a href="#" class="tooltips" title="测试测试测试">测试测试测试a链接</a>
			
		</div>
		<!--华丽丽的分割线-->
		<script src="../js/jquery-1.12.4.min.js"></script>
		<script>
			$.fn.extend({
				toolTips:function(options){
					// 默认参数
					var defaults = {
					  	background: 'rgba(0,0,0,0.5)',
						color: '#fff',

					};
					
					options = $.extend(defaults, options);
					
					return $(this).each(function(){

						var title =  $(this).attr("title");
						if (title != ''){
							var dom = $('<div id="t-toolTip"/>');
							
							// 去掉浏览器本身的title
							$(this).attr("title",'');
							
							// 切换
							$(this).hover(function(){
								dom.appendTo($("body")).css({
									'background' : options.background,
									'color' : options.color,
								}).html(title);
								
							},function(){
								dom.remove();
							});
							
							// 移动
							$(this).mousemove(function(e) {
								dom.css({
									top: e.pageY + 10,
									left: e.pageX + 20
							     });
								 
							});
						}
					})
				}
			});
			
			$(".tooltips").toolTips();
		</script>
	</body>
=======
<!--
	今天项目需求，因为特殊数据的关系，找了两三个模板解析引擎，都不好用，最后还是通过向节点塞数据实现
	现在打算折腾一下模板引擎的原理
-->
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" href="../css/style.css"/>
	<style rel="stylesheet">

	</style>
</head>
<body>
<h1>JS模板引擎原理</h1>
<p>
	<a href="../index.html">返回主菜单</a>
</p>
<div class="wrap">
	<p>
		发现一篇很好的入门教程：<a href="http://blog.jobbole.com/56689/">20行代码写一个模板引擎</a>
	</p>
	<p>下面是测试数据</p>
</div>
<!--华丽丽的分割线-->
<script src="../js/jquery-1.12.4.min.js"></script>

<script>
	!(function () {
        // var tpl = '<p>Hello, my name is <%this.name%>. I\'m <%this.profile.age%> years old.</p>';
        var tpl = '<%for(var i = 1; i < 5; ++i) {%>' +
            '<p> <% i %> </a>' +
            '<%}%>';
        var data = {
            title: "test",
            profile: { age: 29 },
            skills: ["js", "html", "css"]
        };

		var tplEngine = function (data) {
            var re = /<%([^]+?)(?=%>)%>/g;
            var jsExp = /(^( )?(if|for|else|switch|case|break|{|}))(.*)?/g;
            var res = null;

            var fnStr = 'var str = "";\n';
            var cursor = 0;
            while (res = re.exec(tpl)){

                fnStr += 'str += "' + tpl.slice(cursor, res.index).replace(/"/g,"\'") + '";\n';
                
                if (jsExp.test(res[1])) {
                    fnStr += res[1] + '\n';
                }else {
                    fnStr += 'str += ' + res[1] + ';\n';
                }
                
                cursor = res.index + res[0].length;
            }

            fnStr += 'str += "' + tpl.substr(cursor) + '";';
            fnStr += 'return str;';

            var fn = new Function('data',fnStr);

            return fn(data);
        };

        $(".wrap").append(tplEngine(data));
    })();
</script>
</body>
>>>>>>> e544c3a967a6a86bfcacd203bcf5f638b289bd6f
</html>